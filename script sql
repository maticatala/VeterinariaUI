
CREATE TABLE veterinarios (
    nroMatricula INT IDENTITY(1,1) PRIMARY KEY,
    nombre VARCHAR(45) NOT NULL,
    apellido VARCHAR(45) NOT NULL,
    calle VARCHAR(45) NOT NULL,
    altura INT NOT NULL,
    telefono VARCHAR(45)
);

CREATE TABLE clientes (
    nroDoc VARCHAR(45),
    tipoDoc VARCHAR(45),
    nombre VARCHAR(45) NOT NULL,
    apellido VARCHAR(45) NOT NULL,
    calle VARCHAR(45) NOT NULL,
    altura VARCHAR(10) NOT NULL,
    PRIMARY KEY(nroDoc, tipoDoc)
);

CREATE TABLE especies (
    codEspecie INT IDENTITY(1,1) PRIMARY KEY,
    nombreEspecie VARCHAR(150) NOT NULL
);

CREATE TABLE razas (
    codRaza INT IDENTITY(1,1),
    codEspecie INT,
    nombreRaza VARCHAR(150) NOT NULL,
    PRIMARY KEY(codRaza, codEspecie),
    FOREIGN KEY(codEspecie) REFERENCES especies(codEspecie)
);

CREATE TABLE mascotas (
    nroHC INT IDENTITY(1,1) PRIMARY KEY,
    fechaNac DATE NOT NULL,
    nombre VARCHAR(45) NOT NULL,
    sexo CHAR(1) NOT NULL,
    tipoDoc VARCHAR(45) NOT NULL,
    nroDoc VARCHAR(45) NOT NULL,
    codRaza INT NOT NULL,
    codEspecie INT NOT NULL,
    FOREIGN KEY(nroDoc, tipoDoc) REFERENCES clientes(nroDoc, tipoDoc),
    FOREIGN KEY(codRaza, codEspecie) REFERENCES razas(codRaza, codEspecie)
);

CREATE TABLE atenciones (
    nroHC INT,
    nroMatricula INT,
    fechaYHora DATETIME,
    resultado VARCHAR(300),
    PRIMARY KEY(nroHC, nroMatricula, fechaYHora),
    FOREIGN KEY(nroHC) REFERENCES mascotas(nroHC),
    FOREIGN KEY(nroMatricula) REFERENCES veterinarios(nroMatricula)
);

CREATE TABLE practicas (
    codPractica INT IDENTITY(1,1) PRIMARY KEY,
    descripcion VARCHAR(300)
);

CREATE TABLE preciosPracticas (
    codPractica INT,
    fechaDesde DATE,
    precio FLOAT,
    PRIMARY KEY(codPractica, fechaDesde),
    FOREIGN KEY(codPractica) REFERENCES practicas(codPractica)
);

CREATE TABLE detalle_practica (
    codPractica INT,
    nroHC INT,
    nroMatricula INT,
    fechaYHora DATETIME,
    PRIMARY KEY(codPractica, nroHC, nroMatricula, fechaYHora),
    FOREIGN KEY(codPractica) REFERENCES practicas(codPractica),
    FOREIGN KEY(nroHC, nroMatricula, fechaYHora) REFERENCES atenciones(nroHC, nroMatricula, fechaYHora)
);

CREATE TABLE cuotas (
    fechaVencimiento DATE,
    valor FLOAT NOT NULL,
    fechaPago DATE,
    cantidad INT NOT NULL,
    nroHC INT NOT NULL,
    nroMatricula INT NOT NULL,
    fechaYHora DATETIME NOT NULL,
    PRIMARY KEY(fechaVencimiento, nroHC, nroMatricula, fechaYHora),
    FOREIGN KEY(nroHC, nroMatricula, fechaYHora) REFERENCES atenciones(nroHC, nroMatricula, fechaYHora)
);


INSERT INTO clientes (nroDoc, tipoDoc, nombre, apellido, calle, altura) values ('16161616', 'DNI', 'xd', 'xd' ,'xd' ,'12');
